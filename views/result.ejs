<%- include("partials/header", {title: City}) -%>
<%- include('components/map/mapAnimation',{latitude: latitude, longitude: longitude} ) -%>
<%- include('partials/navbar'); -%>

<body>
  <main>
    <!------ Today's Forecast ------->
    <section class="container">
      <div class="site-title text-center">
        <h2>Today's Forecast</h2>
      </div>
    </section>
    <!----X--Today's Forecast ---X-->

    <!------ MID CONTENT -------->
    <section id="map">
      <div class="row">
        <div class="col">
          <div class="weather-data text-center">
            <h1 class="city-name pb-5"><%=City%></h1>
            <h3>Weather Description:</h3>
            <p> <%=Description.substring(0,300)%>. </p>
            <div> <%- include('components/popUpModal',{description: Description}) -%> </div>
            <%- include('components/CurrentWeather',{day: Today, aqi :airQualityIndex}) -%>
          </div>
        </div>
        <div class="col">
          <div id="myMap"></div>
        </div>
        <div class="col">
        <h2 id="hourly-forecast">Hourly Forecast</h2>
          <div class="hourly-weather text-center">
            <div class="card" style="width: 18rem;">
              <div data-spy="scroll" data-target="#list-example" data-offset="0" class="scrollspy-example">
              <ul class="list-group list-group-flush" id="hourly-list">
                 <% for(var i = 0 ; i<24; i++){  %>
                <li class="list-group-item text-left">
                <div class="row">
                <div class="col">
                  <%= new Date(Hourly[i].dt*1000).getHours()+ ":00" %>
                </div>
                <div class="col">
                <strong> <%= Hourly[i].temp.toFixed(0) +"Â° F"%> </strong>
                </div>
                <div class="col">
                <img class="weather-icon-hourly ml-auto" src="http://openweathermap.org/img/wn/<%= Hourly[i].weather[0].icon %>@2x.png" alt="">
                </div>
                </li>
                <%} %>

              </ul>
              </div>
            </div>
          </div>
        </div>
    </section>
    <!--X--- MID CONTENT ----X--->
    <hr>
    <!----- 5 day forcast ------>
    <section>
      <div class="container text-center fiveDay">
        <h2>5 Day Forecast</h2>
        <div class="card-group">

          <% for(var i = 1 ; i<6; i++){  %>
          <%- include('components/forecastCard',{day: Daily[i]}); -%>
          <%} %>

        </div>
      </div>
    </section>
  </main>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous">
  </script>

  <!------- FOOTER -------->

  <%- include('partials/footer') -%>
